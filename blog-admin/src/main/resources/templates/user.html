<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

<!-- Start #header -->
<div th:replace="/layout/header"></div>
<!-- End #header -->
<!-- Start #sidebar -->
<div th:replace="/layout/sidebar"></div>

<!-- End #sidebar -->
<!-- Start #right-sidebar -->

<!-- End #right-sidebar -->
<!-- Start #content -->
<div id="content">
  <!-- Start .content-wrapper -->
  <div class="content-wrapper">
    <div th:replace="/layout/topbar"></div>
    <!-- End .row -->
    <div class="outlet">
      <!-- Start .outlet -->
      <!-- Page start here ( usual with .row ) -->
      <div class="row">
        <!-- Start .row -->
        <div class="col-lg-12">
          <!-- Start col-lg-12 -->
          <table id="tablelist">
          </table>
          <!-- End .panel -->
        </div>
        <!-- End col-lg-12 -->
      </div>
      <!-- End .row -->

      <!-- Page End here -->
    </div>
    <!-- End .outlet -->
  </div>
  <!-- End .content-wrapper -->


</div>
<div th:replace="/layout/footer"></div>


<script type="text/javascript">

  var token = $("meta[name='_csrf']").attr("content");
  var header = $("meta[name='_csrf_header']").attr("content");

  $(function () {
    var options = {
      header: header,
      token: token,
      url: "/user/list",
      getInfoUrl: "/user/get/{id}",
      updateUrl: "/user/edit",
      removeUrl: "/user/remove",
      createUrl: "/user/add",
      saveRolesUrl: "/user/saveUserRoles",
      token: token,
      header: header,
      columns: [
        {
          checkbox: true
        }, {
          field: 'username',
          title: '用户名',
          editable: false
        }, {
          field: 'nickname',
          title: '昵称',
          editable: true
        }, {
          field: 'email',
          title: '邮箱',
          editable: true
        }, {
          field: 'qq',
          title: 'qq',
          editable: true
        }, {
          field: 'userType',
          title: '用户类型',
          editable: false
        }, {
          field: 'lastLoginTime',
          title: '最后登录时间',
          editable: false,
          formatter: function (code) {
            return new Date(code).format("yyyy-MM-dd hh:mm:ss")
          }
        }, {
          field: 'loginCount',
          title: '登录次数',
          editable: false
        }, {
          field: 'operate',
          title: '操作',
          formatter: operateFormatter //自定义方法，添加操作按钮
        }
      ],
      modalName: "用户"
    };
    //1.初始化Table
    $.tableUtil.init(options);

  });

  /**
   * 添加
   */
  function operateFormatter(row, index) {

    var operateBtn = [
      '<a class="btn btn-xs btn-primary btn-update" data-id=""><i class="fa-edit"></i>编辑</a>',
    ];
    return operateBtn.join('');
  }
</script>
</html>